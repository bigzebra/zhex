
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>ZHex Editor v0.02: Project Source Code</title>
	<link rel="stylesheet" type="text/css" href="desert.css"/>
</head>
<body>
	<h2>ZHex Editor v0.02</h2>
	<p>ZHex Editor source code filename: ../ZHex/Event.pm</p>
	<div><pre class="prettyprint"><span class="com">#!/usr/bin/perl
</span><span class="pln">
</span><span class="lit">package</span><span class="pln"> </span><span class="atn">ZHex::Event</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="kwd">use</span><span class="pln"> </span><span class="atv">5.006</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">use</span><span class="pln"> </span><span class="kwd">strict</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">use</span><span class="pln"> </span><span class="kwd">warnings</span><span class="pln"> </span><span class="str">FATAL</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">&#39;all&#39;</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="kwd">use</span><span class="pln"> </span><span class="pln">ZHex::Common</span><span class="pln"> 
</span><span class="pln">  </span><span class="str">qw(new 
     obj_init 
     $VERS 
     EDT_CTXT_DEFAULT 
     EDT_CTXT_INSERT 
     EDT_CTXT_SEARCH)</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="kwd">BEGIN</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">require</span><span class="pln"> </span><span class="pln">Exporter</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">our</span><span class="pln"> </span><span class="typ">$VERSION</span><span class="pln">   </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$VERS</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">our</span><span class="pln"> </span><span class="typ">@ISA</span><span class="pln">       </span><span class="pun">=</span><span class="pln"> </span><span class="str">qw(Exporter)</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">our</span><span class="pln"> </span><span class="typ">@EXPORT</span><span class="pln">    </span><span class="pun">=</span><span class="pln"> </span><span class="str">qw()</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">our</span><span class="pln"> </span><span class="typ">@EXPORT_OK</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">qw()</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="com"># Functions: Start-Up/Initialization.
</span><span class="com">#
</span><span class="com">#   _____________	___________
</span><span class="com">#   Function Name	Description
</span><span class="com">#   _____________	___________
</span><span class="com">#   init()		Global variable declarations.
</span><span class="pln">
</span><span class="lit">sub</span><span class="pln"> </span><span class="typ">init</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$self</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;search_str&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;search_pos&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">0</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;curs_ctxt_prev&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">0</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# Event callback subroutine references.
</span><span class="pln">
	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">EDT_CTXT_DEFAULT</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">EDT_CTXT_INSERT</span><span class="pun">}</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">EDT_CTXT_SEARCH</span><span class="pun">}</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# Event signatures: map @evt array (returned by Win32::Console) to &quot;event name&quot;.
</span><span class="pln">
	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">EDT_CTXT_DEFAULT</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">EDT_CTXT_INSERT</span><span class="pun">}</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">EDT_CTXT_SEARCH</span><span class="pun">}</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="atv">1</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="com"># Functions: That used to live in EventLoop.pm.
</span><span class="com">#
</span><span class="com">#   ____			___________
</span><span class="com">#   NAME			DESCRIPTION
</span><span class="com">#   ____			___________
</span><span class="com">#   register_callback()		Register callback subroutine to handle event under certain context.
</span><span class="com">#   register_evt_sig()		Register event signature (unique values of evt array that identify different keystrokes).
</span><span class="com">#   gen_evt_array()		...
</span><span class="com">#   evt_map()			...
</span><span class="com">#   evt_dispatch()		...
</span><span class="pln">
</span><span class="lit">sub</span><span class="pln"> </span><span class="typ">register_callback</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$self</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;HASH&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to register_callback() failed, argument must be hash reference&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to register_callback() failed, value associated w/ key &#39;edt_ctxt&#39; was undef/empty string&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to register_callback() failed, value associated w/ key &#39;evt_nm&#39; was undef/empty string&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_cb&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_cb&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_cb&#39;</span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;CODE&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to register_callback() failed, value associated w/ key &#39;evt_cb&#39; must be code reference&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;ARRAY&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to register_callback() failed, value associated w/ key &#39;evt&#39; must be array reference&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">   </span><span class="com"># &lt;--- Change back to die...</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# Store callback in callback hash: $self-&gt;{&#39;cb&#39;}.
</span><span class="pln">
	</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_cb&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">foreach</span><span class="pln"> </span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$evt_sig</span><span class="pln"> </span><span class="pun">(</span><span class="var">@</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
</span><span class="com">		# Store event signature in [wherever it gets stored].
</span><span class="pln">
		</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="typ">register_evt_sig</span><span class="pln"> 
</span><span class="pln">		  </span><span class="pun">(</span><span class="pun">{</span><span class="pln"> </span><span class="str">&#39;edt_ctxt&#39;</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pun">,</span><span class="pln"> 
</span><span class="pln">		     </span><span class="str">&#39;evt_nm&#39;</span><span class="pln">   </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pun">,</span><span class="pln"> 
</span><span class="pln">		     </span><span class="str">&#39;evt&#39;</span><span class="pln">      </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="typ">$evt_sig</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# $self-&gt;{&#39;obj&#39;}-&gt;{&#39;debug&#39;}-&gt;errmsg (&quot;Registered callback for &#39;&quot; . $arg-&gt;{&#39;evt_nm&#39;} . &quot;&#39; (context=&#39;&quot; . $arg-&gt;{&#39;edt_ctxt&#39;} . &quot;&#39;.\n&quot;);
</span><span class="com">	# warn (&quot;Registered callback for &#39;&quot; . $arg-&gt;{&#39;evt_nm&#39;} . &quot;&#39; (context=&#39;&quot; . $arg-&gt;{&#39;edt_ctxt&#39;} . &quot;&#39;).&quot;);
</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="atv">1</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="lit">sub</span><span class="pln"> </span><span class="typ">register_evt_sig</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$self</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;HASH&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to register_evt_sig() failed, argument must be hash reference&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to register_evt_sig() failed, value associated w/ key &#39;edt_ctxt&#39; must not be undef/empty&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to register_evt_sig() failed, value associated w/ key &#39;evt_nm&#39; must not be undef/empty&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;ARRAY&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to register_evt_sig() failed, value associated w/ key &#39;evt&#39; must be array ref&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# Register a set of callback matching criteria.
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln">
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;HASH&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
		</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;HASH&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
		</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	       </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;ARRAY&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> 
</span><span class="pln">
		</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">push</span><span class="pln"> </span><span class="var">@</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">,</span><span class="pln"> 
</span><span class="pln">	     </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# $self-&gt;{&#39;obj&#39;}-&gt;{&#39;debug&#39;}-&gt;errmsg (&quot;Registered event signature for &#39;&quot; . $arg-&gt;{&#39;evt_nm&#39;} . &quot;&#39;.\n&quot;);
</span><span class="com">	# warn (&quot;Registered event signature for &#39;&quot; . $arg-&gt;{&#39;evt_nm&#39;} . &quot;&#39; (context=&#39;&quot; . $arg-&gt;{&#39;edt_ctxt&#39;} . &quot;&#39;.&quot;);
</span><span class="pln">
</span><span class="com">	# warn 
</span><span class="com">	#   (&quot;evt0=&#39;&quot; . $arg-&gt;{&#39;evt&#39;}-&gt;[0] . &quot;&#39;, &quot; . 
</span><span class="com">	#    &quot;evt1=&#39;&quot; . $arg-&gt;{&#39;evt&#39;}-&gt;[1] . &quot;&#39;, &quot; . 
</span><span class="com">	#    &quot;evt2=&#39;&quot; . $arg-&gt;{&#39;evt&#39;}-&gt;[2] . &quot;&#39;, &quot; . 
</span><span class="com">	#    &quot;evt3=&#39;&quot; . $arg-&gt;{&#39;evt&#39;}-&gt;[3] . &quot;&#39;, &quot; . 
</span><span class="com">	#    &quot;evt4=&#39;&quot; . $arg-&gt;{&#39;evt&#39;}-&gt;[4] . &quot;&#39;, &quot; . 
</span><span class="com">	#    &quot;evt5=&#39;&quot; . $arg-&gt;{&#39;evt&#39;}-&gt;[5] . &quot;&#39;, &quot; . 
</span><span class="com">	#    &quot;evt6=&#39;&quot; . $arg-&gt;{&#39;evt&#39;}-&gt;[6] . &quot;&#39;.&quot;);
</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="atv">1</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="lit">sub</span><span class="pln"> </span><span class="typ">gen_evt_array</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$self</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;HASH&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to gen_evt_array() failed, argument must be hash reference&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;0&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;0&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	         </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;0&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;0&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">	   </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;1&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;1&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	         </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;1&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;1&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">	   </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;2&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;2&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	         </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;2&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;2&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">	   </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;3&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;3&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	         </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;3&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;3&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">	   </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;4&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;4&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	         </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;4&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;4&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">	   </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;5&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;5&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	         </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;5&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;5&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">	   </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;6&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;6&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	         </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;6&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">6</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;6&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">	   </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">$evt_array</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">6</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt_array</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="lit">sub</span><span class="pln"> </span><span class="typ">evt_map</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$self</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;HASH&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to evt_map() failed, argument must be hash reference&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to evt_map() failed, value associated w/ key &#39;edt_ctxt&#39; was undef or empty string&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;ARRAY&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to evt_map() failed, value associated w/ key &#39;evt&#39; must be array ref&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$objCharMap</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;obj&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;charmap&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$objDebug</span><span class="pln">   </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;obj&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;debug&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# EVT Array Idx	Element Name		Values
</span><span class="com">	# _____________	____________		______
</span><span class="com">	# $evt-&gt;[0]	Event Type		1 == Keyboard Event
</span><span class="com">	# $evt-&gt;[1]	Key   Down		1 == Key Pressed
</span><span class="com">	# $evt-&gt;[2]	???			-
</span><span class="com">	# $evt-&gt;[3]	Virtual Keycode		-
</span><span class="com">	# $evt-&gt;[4]	Virtual Scancode	-
</span><span class="com">	# $evt-&gt;[5]	???			-
</span><span class="com">	# $evt-&gt;[6]	?Control Key Status?	-
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$evt</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# Eliminate non-interesting events.
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="atv">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">   </span><span class="com"># Event_Type: 2 (indicates mouse event).</span><span class="pln">
</span><span class="pln">	    </span><span class="kwd">exists</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	       </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln">  </span><span class="atv">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln">                </span><span class="com"># Button_State:        1 (indicates left  mouse button).</span><span class="pln">
</span><span class="pln">	          </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln">  </span><span class="atv">2</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln">               </span><span class="com"># Button_State:        2 (indicates right mouse button).</span><span class="pln">
</span><span class="pln">	       </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln">  </span><span class="atv">7864320</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln">          </span><span class="com"># Button_State:  7864320 (indicates mouse wheel roll upward).</span><span class="pln">
</span><span class="pln">	          </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="atv">-7864320</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">         </span><span class="com"># Button_State: -7864320 (indicates mouse wheel roll downward).</span><span class="pln">
</span><span class="pln">	  </span><span class="pun">(</span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="atv">4</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
</span><span class="com">		# Mouse button pressed, may be an event in this context, pass through...
</span><span class="pln">
		</span><span class="kwd">undef</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">elsif</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="atv">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">              </span><span class="com"># Event_Type:    2 (indicates &#39;mouse&#39; event).</span><span class="pln">
</span><span class="pln">	       </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=~</span><span class="pln"> </span><span class="str">/^\d\d?\d?$/</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">   </span><span class="com"># X Coordinate:  One to three digits.</span><span class="pln">
</span><span class="pln">	       </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=~</span><span class="pln"> </span><span class="str">/^\d\d?\d?$/</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">   </span><span class="com"># Y Coordinate:  One to three digits.</span><span class="pln">
</span><span class="pln">	       </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="atv">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">              </span><span class="com"># Button state:  0 (indicates no mouse button was clicked).</span><span class="pln">
</span><span class="pln">	       </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="atv">1</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">              </span><span class="com"># Event flags:   1 (???).</span><span class="pln">
</span><span class="pln">
</span><span class="com">		# Mouse movement, not an &quot;event&quot; in this context, return &#39;undef&#39; to caller.
</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">undef</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">elsif</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="atv">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">   </span><span class="com"># Event_Type: 1 (keyboard event)</span><span class="pln">
</span><span class="pln">	       </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="atv">1</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">   </span><span class="com"># Key_Down:   1 (key pressed)</span><span class="pln">
</span><span class="pln">
</span><span class="com">		# Keyboard key pressed, may be an &quot;event&quot; in this context, pass through...
</span><span class="pln">
		</span><span class="kwd">undef</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
</span><span class="com">		# Unmatched event, return &#39;undef&#39; to caller.
</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">undef</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# ______________________________________________________
</span><span class="com">	# CONTEXT BASED BRANCH DECISION TABLE
</span><span class="com">	# ______________________________________________________
</span><span class="com">	#
</span><span class="com">	#   Possible values of &#39;edt_ctxt&#39;:
</span><span class="com">	#
</span><span class="com">	#     __________		___________
</span><span class="com">	#     CTXT Value		Description
</span><span class="com">	#     __________		___________
</span><span class="com">	#     EDT_CTXT_DEFAULT		Default behavior, begins at start. Keystrokes cause events within editor display like scrolling.
</span><span class="com">	#     EDT_CTXT_INSERT		Insert a string of characters at a given position within file.
</span><span class="com">	#     EDT_CTXT_SEARCH		Search for a string of characters within file.
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$func</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">foreach</span><span class="pln"> </span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$func_nm</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">keys</span><span class="pln"> </span><span class="var">%</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
		</span><span class="kwd">foreach</span><span class="pln"> </span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$func_evt</span><span class="pln"> </span><span class="pun">(</span><span class="var">@</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_sig&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$func_nm</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
			</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">0</span><span class="pun">]</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">			     </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">1</span><span class="pun">]</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">			     </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">2</span><span class="pun">]</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">			     </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">3</span><span class="pun">]</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">			     </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">4</span><span class="pun">]</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">			     </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">5</span><span class="pun">]</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">			     </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">6</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">6</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func_evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">6</span><span class="pun">]</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="typ">$evt</span><span class="pun">-&gt;</span><span class="pun">[</span><span class="atv">6</span><span class="pun">]</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
				</span><span class="typ">$func</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$func_nm</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="com">				# $self-&gt;{&#39;obj&#39;}-&gt;{&#39;debug&#39;}-&gt;errmsg (&quot;FUNCTION MATCHED &#39;&quot; . $func_nm . &quot;&#39;.&quot;);
</span><span class="pln">			</span><span class="pun">}</span><span class="pln">
</span><span class="com">			# else {
</span><span class="com">			# 
</span><span class="com">			# 	for (my $idx = 0; $idx &lt; 6; $idx++) {
</span><span class="com">			# 
</span><span class="com">			# 		if (! exists  $func_evt-&gt;[$idx] || 
</span><span class="com">			# 		    ! defined $func_evt-&gt;[$idx]) {
</span><span class="com">			# 
</span><span class="com">			# 			$func_evt-&gt;[$idx] = &quot;&lt;undef&gt;&quot;;
</span><span class="com">			# 		}
</span><span class="com">			# 
</span><span class="com">			# 		if (! exists  $evt-&gt;[$idx] || 
</span><span class="com">			# 		    ! defined $evt-&gt;[$idx]) {
</span><span class="com">			# 
</span><span class="com">			# 			$evt-&gt;[$idx] = &quot;&lt;undef&gt;&quot;;
</span><span class="com">			# 		}
</span><span class="com">			# 
</span><span class="com">			# 		$objDebug-&gt;errmsg 
</span><span class="com">			# 		  (sprintf (&quot;Event array field &quot; . $idx . &quot;: %10.10s %10.10s&quot;, $func_evt-&gt;[$idx], $evt-&gt;[$idx]));
</span><span class="com">			# 	}
</span><span class="com">			# }
</span><span class="pln">		</span><span class="pun">}</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="com">	# $objDebug-&gt;errmsg (&quot;at bottom, edt_ctxt=&quot; . $arg-&gt;{&#39;edt_ctxt&#39;} . &quot;.&quot;);
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$func</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$func</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">	     </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">undef</span><span class="pun">)</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$func</span><span class="pun">)</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="lit">sub</span><span class="pln"> </span><span class="typ">evt_dispatch</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$self</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">shift</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;HASH&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to evt_dispatch() failed, argument must be hash reference&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to evt_dispatch() failed, value associated w/ key &#39;evt_nm&#39; must be array ref&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to evt_dispatch() failed, value associated w/ key &#39;edt_ctxt&#39; was undef or empty string&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pun">!</span><span class="pln"> </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	    </span><span class="pun">!</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	             </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">!</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;ARRAY&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> 
</span><span class="pln">		</span><span class="pun">{</span><span class="pln"> </span><span class="kwd">die</span><span class="pln"> </span><span class="str">&quot;Call to evt_dispatch() failed, value associated w/ key &#39;evt&#39; must be array ref&quot;</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$objCharMap</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;obj&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;charmap&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$objDebug</span><span class="pln">   </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;obj&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;debug&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">my</span><span class="pln"> </span><span class="typ">$objEditor</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;obj&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;editor&#39;</span><span class="pun">}</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;HASH&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;HASH&#39;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">exists</span><span class="pln">  </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln">  </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	    </span><span class="kwd">defined</span><span class="pln"> </span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln">  </span><span class="pun">&amp;&amp;</span><span class="pln"> 
</span><span class="pln">	      </span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> </span><span class="pun">(</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pln"> </span><span class="pun">eq</span><span class="pln"> </span><span class="str">&#39;CODE&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
</span><span class="com">		# Call the subroutine associated with this event (callback routine).
</span><span class="pln">
		</span><span class="typ">$self</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;cb&#39;</span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;edt_ctxt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt_nm&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">-&gt;</span><span class="pun">(</span><span class="pun">{</span><span class="pln"> </span><span class="str">&#39;evt&#39;</span><span class="pun">=&gt;</span><span class="typ">$arg</span><span class="pun">-&gt;</span><span class="pun">{</span><span class="str">&#39;evt&#39;</span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pln">		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="atv">1</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pln">	</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="atv">0</span><span class="pun">)</span><span class="pun">;</span><span class="pln">
</span><span class="pln">	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pln">
</span><span class="pln">
</span><span class="kwd">END</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">undef</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="atv">1</span><span class="pun">;</span><span class="pln">
</span><span class="pln">
</span><span class="pln">
</span><span class="kwd">__END__</span><span class="pln">
</span><span class="com">

</span><span class="com">=head1 NAME

ZHex::Event (ZHex/Event.pm) - Event Module, ZHex Editor.

=head1 VERSION

Version 0.02

=cut
</span><span class="com">
our $VERSION = &#39;0.02&#39;;

</span><span class="com">=head1 SYNOPSIS

ZHex::Event provides functions for registering callback subroutines to 
handle various event types, and provides for the abstraction of 
&#39;context&#39; which means that different callback subroutines will be called 
based upon which context the hex editor is currently operating within. 

Usage:

    use ZHex::Common qw(new obj_init $VERS);
    my $objEvent = $self-&gt;{&#39;obj&#39;}-&gt;{&#39;event&#39;};
    $objEvent-&gt;register_callback (@evt_array);

=head1 EXPORT

No functions are exported.

=head1 SUBROUTINES/METHODS

=head2 new
Method new()...
= cut

=head2 init
Method init()...
= cut

=head2 obj_init
Method obj_init()...
= cut

=head2 register_callback
Method register_callback()...
= cut

=head2 register_evt_sig
Method register_evt_sig()...
= cut

=head2 gen_evt_array
Method gen_evt_array()...
= cut

=head2 evt_map
Method evt_map()...
= cut

=head2 evt_dispatch
Method evt_dispatch()...
= cut

=head1 AUTHOR

Double Z, C&lt;&lt; &lt;zacharyz at gmail.com&gt; &gt;&gt;

=head1 BUGS

Please report any bugs or feature requests to C&lt;bug-ZHex at rt.cpan.org&gt;, or 
via the web interface: L&lt;http://rt.cpan.org/NoAuth/ReportBug.html?Queue=ZHex&gt;.  
I will be notified, and then you&#39;ll automatically be notified of progress on 
your bug as I make changes.

=head1 SUPPORT

You can find documentation for this module with the perldoc command.

    perldoc ZHex

You can also look for information at:

=over 4

=item * RT: CPAN&#39;s request tracker (report bugs here)

L&lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=ZHex&gt;

=item * AnnoCPAN: Annotated CPAN documentation

L&lt;http://annocpan.org/dist/ZHex&gt;

=item * CPAN Ratings

L&lt;http://cpanratings.perl.org/d/ZHex&gt;

=item * Search CPAN

L&lt;http://search.cpan.org/dist/ZHex/&gt;

=back

=head1 ACKNOWLEDGEMENTS

=head1 LICENSE AND COPYRIGHT

Copyright 2014 Double Z.

This program is free software; you can redistribute it and/or modify it
under the terms of the the Artistic License (2.0). You may obtain a
copy of the full license at:

L&lt;http://www.perlfoundation.org/artistic_license_2_0&gt;

Any use, modification, and distribution of the Standard or Modified
Versions is governed by this Artistic License. By using, modifying or
distributing the Package, you accept this license. Do not use, modify,
or distribute the Package, if you do not accept this license.

If your Modified Version has been derived from a Modified Version made
by someone other than you, you are nevertheless required to ensure that
your Modified Version complies with the requirements of this license.

This license does not grant you the right to use any trademark, service
mark, tradename, or logo of the Copyright Holder.

This license includes the non-exclusive, worldwide, free-of-charge
patent license to make, have made, use, offer to sell, sell, import and
otherwise transfer the Package with respect to any patent claims
licensable by the Copyright Holder that are necessarily infringed by the
Package. If you institute patent litigation (including a cross-claim or
counterclaim) against any party alleging that the Package constitutes
direct or contributory patent infringement, then this Artistic License
to you shall terminate on the date that such litigation is filed.

Disclaimer of Warranty: THE PACKAGE IS PROVIDED BY THE COPYRIGHT HOLDER
AND CONTRIBUTORS &quot;AS IS&#39; AND WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES.
THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
PURPOSE, OR NON-INFRINGEMENT ARE DISCLAIMED TO THE EXTENT PERMITTED BY
YOUR LOCAL LAW. UNLESS REQUIRED BY LAW, NO COPYRIGHT HOLDER OR
CONTRIBUTOR WILL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, OR
CONSEQUENTIAL DAMAGES ARISING IN ANY WAY OUT OF THE USE OF THE PACKAGE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

=cut
</span><span class="com">
1;

</span></pre></div>
</body>
</html>

